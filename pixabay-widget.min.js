// Pixabay Image Gallery Widget v1.0.0
// https://github.com/Pixabay/JavaScript-PixabayWidget
!function(){function e(e){return e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"):""}function t(e){return e.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})}function a(e,t,a,r,n){var i="pxw_callback_"+c;return window[i]=function(o){e(o,t,a,r,n);try{delete window[i]}catch(s){}},c++,i}function r(e,t){for(var a=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector;e;){if(a.bind(e)(t))return e;e=e.parentElement}}function n(e){for(var t="",a=0,r=e.attributes;a<r.length;a++)"data-attrstr"!=r[a].name&&(t+=r[a].name+r[a].value);return t}function o(){for(var e=0,t=document.querySelectorAll("."+l.className);e<t.length;e++){var r=t[e];if(n(r)!=r.getAttribute("data-attrstr")){var i=parseInt(r.getAttribute("data-page"))||1,o=parseInt(r.getAttribute("data-perPage"))||l.perPage,c=r.getAttribute("data-search")||"",d=r.getAttribute("data-user")||"";o=o>100?100:o,d&&(c="user:"+d+" "+c);var g="http://pixabay.com/api/?username=PixabayWidget&key=2e318db2f775b21a12e5&order="+(r.getAttribute("data-order")||l.order)+"&image_type="+(r.getAttribute("data-imageType")||l.imageType)+"&safesearch="+(r.getAttribute("data-safesearch")||l.safesearch)+"&editors_choice="+(r.getAttribute("data-editorsChoice")||l.editorsChoice)+"&per_page="+o+"&page="+i+"&q="+encodeURIComponent(c);if(g in s)APIResponse(s[g],r,i,o,g);else{var p=document.createElement("script");p.src=g+"&callback="+a(APIResponse,r,i,o,g),document.body.appendChild(p)}}}}var s={},c=0,l={className:"pixabay_widget",rowHeight:100,perPage:25,maxRows:0,truncate:!1,imageType:"all",safesearch:!1,editorsChoice:!1,order:"popular",target:"",navpos:"bottom",branding:!0,prev:"◄ PREV",next:"NEXT ►"};if("object"==typeof pixabayWidget)for(var d in pixabayWidget)Object.prototype.hasOwnProperty.call(pixabayWidget,d)&&(l[d]=pixabayWidget[d]);styles="** .noselect { -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; }** a, ** b { color: #4e99c7; text-decoration: none; font-weight: normal; cursor: pointer; transition: .3s; }** a:hover, ** b:hover { opacity: .7; }** a img { border: 0; }** **_nav { clear: both; padding: 3px 7px; font: normal 12px arial, sans-serif; color: #777; }** **_nav span { color: #ddd; cursor: default; }** .branding { float: right; }**.flex_grid { overflow: hidden; }**.flex_grid .item { float: left; margin: 2px; border: 1px solid #eee; box-sizing: content-box; overflow: hidden; position: relative;  }**.flex_grid .item img { display: block; width: auto; height: 100%; background: #fff; transition: .3s; }**.flex_grid .item img:hover { opacity: .85; }".replace(/\*\*/g,"."+l.className);var g=document.createElement("style");g.type="text/css",g.styleSheet?g.styleSheet.cssText=styles:g.appendChild(document.createTextNode(styles)),document.getElementsByTagName("head")[0].appendChild(g),!function(){function e(e,t,a){var r=e.offsetWidth,n=window.getComputedStyle?getComputedStyle(e,null):e.currentStyle;return t?r+=(parseInt(n.marginLeft)||0)+(parseInt(n.marginRight)||0):a&&(r-=(parseInt(n.borderLeftWidth)||0)+(parseInt(n.borderRightWidth)||0)),r}function t(a,r,n,o){function s(e){n.maxRows&&g>n.maxRows||n.truncate&&e&&g>1?u[c][0].style.display="none":(u[c][5]&&(u[c][4].setAttribute("src",u[c][5]),u[c][5]=""),u[c][0].style.width=l+"px",u[c][0].style.height=f+"px",u[c][0].style.display="block")}var c,l,d=1,g=1,p=e(a,!1,!0),u=[],m=0,f=n.rowHeight;for(i=0;i<r.length;i++)if(u.push(r[i]),m+=r[i][3]+n.margin,m>=p){for(d=p/m,f=Math.ceil(n.rowHeight*d),exact_w=0,c=0;c<u.length;c++)l=Math.ceil(u[c][3]*d),exact_w+=l+n.margin,exact_w>p&&(l-=exact_w-p+1),s();u=[],m=0,g++}for(c=0;c<u.length;c++)l=Math.floor(u[c][3]*d),h=Math.floor(n.rowHeight*d),s(!0);o||p==e(a,!1,!0)||t(a,r,n,!0)}this.flexImages=function(){var a={selector:null,container:".item",object:"img",rowHeight:180,maxRows:0,truncate:0};if(arguments[0]&&"object"==typeof arguments[0])for(var r in arguments[0])Object.prototype.hasOwnProperty.call(arguments[0],r)&&(a[r]=arguments[0][r]);var n="object"==typeof a.selector?[a.selector]:document.querySelectorAll(a.selector);for(i=0;i<n.length;i++){var o=n[i],s=o.querySelectorAll(a.container),c=[],l=(new Date).getTime();for(a.margin=e(s[0],!0)-e(s[0],!1,!0),j=0;j<s.length;j++){var d=s[j],g=parseInt(d.getAttribute("data-w")),p=parseInt(d.getAttribute("data-h")),u=g*(a.rowHeight/p),m=d.querySelector(a.object);c.push([d,g,p,u,m,m.getAttribute("data-src")])}t(o,c,a),tempf=function(){t(o,c,a)},document.addEventListener?(window["flexImages_listener"+l]=tempf,window.removeEventListener("resize",window["flexImages_listener"+o.getAttribute("data-flex-t")]),window.addEventListener("resize",window["flexImages_listener"+l])):o.onresize=tempf,o.setAttribute("data-flex-t",l)}}}(),APIResponse=function(a,r,i,o,c){s[c]=a;var d="",g="",p=parseInt(r.getAttribute("data-rowHeight")||l.rowHeight),u=r.getAttribute("data-maxRows")||l.maxRows,m=r.getAttribute("data-truncate")||l.truncate,f=r.getAttribute("data-target")||l.target,b=r.getAttribute("data-branding")||l.branding,h=r.getAttribute("data-navpos")||l.navpos;"false"==m?m=0:"true"==m&&(m=1),"false"==b?b=0:"true"==b&&(b=1);var v=a.totalHits>o&&l.prev&&l.next;(v||b)&&(d+='<div class="noselect '+l.className+'_nav">',b&&(d+='<div class="branding">Powered by <a href="http://pixabay.com/" target="'+f+'">Pixabay</a></div>'),v&&(d+=i>1?'<b class="'+l.className+'_prev">'+l.prev+"&nbsp;</b>":"<span>"+l.prev+"&nbsp;</span>",d+=i*o<a.totalHits?'<b class="'+l.className+'_next">&nbsp; '+l.next+"</b>":"<span>&nbsp; "+l.next+"</span>"),d+="</div>"),"top"==h&&(g+=d);for(var w=0,x=a.hits;w<x.length;w++){var y=x[w].previewWidth,A=x[w].previewHeight,_=x[w].previewURL;p>A-10&&(y*=180/(A+1),A=180,_=_.replace("_150","__180")),g+='<div class="item" data-w="'+y+'" data-h="'+A+'"><a title="'+e(t(x[w].tags))+'" href="'+x[w].pageURL+'" target="'+f+'"><img src="http://pixabay.com/static/img/blank.gif" data-src="'+_+'"></a></div>'}"bottom"==h&&(g+=d),r.innerHTML=g,r.className.indexOf("flex_grid")<0&&(r.className+=" flex_grid"),new flexImages({selector:r,rowHeight:p,maxRows:parseInt(u),truncate:m}),r.setAttribute("data-attrstr",n(r))},document.addEventListener?document.addEventListener("click",function(e){var t=0;if(e.target.className==l.className+"_prev"?t=-1:e.target.className==l.className+"_next"&&(t=1),t){var a=r(e.target,"."+l.className),n=(parseInt(a.getAttribute("data-page"))||1)+t;n&&(a.setAttribute("data-page",n),o()),e.preventDefault()}}):(l.prev="",l.next=""),this.initPixabayWidget=o,"loading"!=document.readyState?o():document.addEventListener?document.addEventListener("DOMContentLoaded",o):document.attachEvent("onreadystatechange",function(){"complete"==document.readyState&&o()})}();